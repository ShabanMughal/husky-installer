@import 'tailwindcss';
@import 'fumadocs-ui/css/neutral.css';
@import 'fumadocs-ui/css/preset.css';

@theme {
  --color-fd-background: hsl(0, 0%, 96%);
  --color-fd-foreground: hsl(0, 0%, 3.9%);
  --color-fd-muted: hsl(0, 0%, 96.1%);
  --color-fd-muted-foreground: hsl(0, 0%, 45.1%);
  --color-fd-popover: hsl(0, 0%, 98%);
  --color-fd-popover-foreground: hsl(0, 0%, 15.1%);
  --color-fd-card: hsl(0, 0%, 94.7%);
  --color-fd-card-foreground: hsl(0, 0%, 3.9%);
  --color-fd-border: hsla(0, 0%, 80%, 50%);
  --color-fd-primary: hsl(
    217,
    91%,
    60%
  ); /* blue-600 for active sidebar items */
  --color-fd-primary-foreground: hsl(0, 0%, 98%);
  --color-fd-secondary: hsl(0, 0%, 93.1%);
  --color-fd-secondary-foreground: hsl(0, 0%, 9%);
  --color-fd-accent: hsla(0, 0%, 82%, 50%);
  --color-fd-accent-foreground: hsl(0, 0%, 9%);
  --color-fd-ring: hsl(0, 0%, 63.9%);
}

.dark {
  --color-fd-background: hsl(0, 0%, 7.04%);
  --color-fd-foreground: hsl(0, 0%, 92%);
  --color-fd-muted: hsl(0, 0%, 12.9%);
  --color-fd-muted-foreground: hsla(0, 0%, 70%, 0.8);
  --color-fd-popover: hsl(0, 0%, 11.6%);
  --color-fd-popover-foreground: hsl(0, 0%, 86.9%);
  --color-fd-card: hsl(0, 0%, 9.8%);
  --color-fd-card-foreground: hsl(0, 0%, 98%);
  --color-fd-border: hsla(0, 0%, 40%, 20%);
  --color-fd-primary: hsl(
    217,
    96%,
    70%
  ); /* blue-400 for active sidebar items in dark mode */
  --color-fd-primary-foreground: hsl(0, 0%, 9%);
  --color-fd-secondary: hsl(0, 0%, 12.9%);
  --color-fd-secondary-foreground: hsl(0, 0%, 92%);
  --color-fd-accent: hsla(0, 0%, 40.9%, 30%);
  --color-fd-accent-foreground: hsl(0, 0%, 90%);
  --color-fd-ring: hsl(0, 0%, 54.9%);
}

body {
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
}

/* Ensure active sidebar items use the blue primary color */

/* Curved TOC Lines - Fumadocs Style with SVG-like curves */
[data-toc] {
  --toc-border-width: 2px;
  --toc-border-radius: 12px;
}

/* Remove default borders */
[data-toc] a {
  border-left: none !important;
  position: relative;
  padding-left: 1.25rem;
  margin-left: 0.5rem;
}

/* Create the vertical line with curves */
[data-toc]::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: var(--toc-border-width);
  background: linear-gradient(
    to bottom,
    transparent 0%,
    hsl(var(--fd-border)) 10%,
    hsl(var(--fd-border)) 90%,
    transparent 100%
  );
  border-radius: var(--toc-border-radius);
}

/* Horizontal connector for each item */
[data-toc] a::before {
  content: '';
  position: absolute;
  left: -0.5rem;
  top: 50%;
  width: 0.5rem;
  height: var(--toc-border-width);
  background: hsl(var(--fd-border));
  transform: translateY(-50%);
  border-top-right-radius: var(--toc-border-radius);
  border-bottom-right-radius: var(--toc-border-radius);
}

/* Active state styling */
[data-toc] a[data-active='true'] {
  color: hsl(var(--fd-primary));
  font-weight: 500;
}

[data-toc] a[data-active='true']::before {
  background: hsl(var(--fd-primary));
  width: 0.75rem;
}

/* Curve effect using pseudo-elements */
[data-toc] a::after {
  content: '';
  position: absolute;
  left: -0.5rem;
  top: 50%;
  width: 0.5rem;
  height: 1.5rem;
  border-left: var(--toc-border-width) solid hsl(var(--fd-border));
  border-bottom: var(--toc-border-width) solid hsl(var(--fd-border));
  border-bottom-left-radius: var(--toc-border-radius);
  transform: translateY(-50%);
  clip-path: polygon(0 0, 100% 0, 100% 50%, 0 50%);
}

[data-toc] a[data-active='true']::after {
  border-color: hsl(var(--fd-primary));
}

/* Alternative approach: Use mask for smooth curves */
nav[data-toc] {
  position: relative;
  padding-left: 1rem;
}

nav[data-toc]::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 2px;
  background: hsl(var(--fd-border));
  mask-image: linear-gradient(
    to bottom,
    transparent 0%,
    black 5%,
    black 95%,
    transparent 100%
  );
  -webkit-mask-image: linear-gradient(
    to bottom,
    transparent 0%,
    black 5%,
    black 95%,
    transparent 100%
  );
}
